<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MCS Portal</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #f5f9fc; }
    header {
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      color: white;
      text-align: center;
      padding: 30px 20px;
    }
    .container {
      max-width: 800px;
      margin: 30px auto;
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      display: none;
    }
    .container.active { display: block; animation: fadeIn 0.4s ease; }
    input, button {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }
    button { background: #2a5298; color: white; cursor: pointer; }
    button:hover { background: #1e3c72; }
    .link-button {
      background: none; border: none;
      color: #2a5298; text-decoration: underline; cursor: pointer;
    }
    #splash {
      position: fixed; inset: 0;
      background: linear-gradient(135deg, #1e3c72, #2a5298);
      display: flex; align-items: center; justify-content: center;
      flex-direction: column; color: white;
      z-index: 9999; visibility: hidden; opacity: 0;
      transition: all 1s ease;
    }
    #splash.show { visibility: visible; opacity: 1; }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>

<header>
  <h1>MUNTINLUPA COSMOPOLITAN SCHOOL</h1>
  <p>Student Portal</p>
</header>

<div id="splash">
  <h1>Welcome to MCS Portal!</h1>
  <p>Logging in...</p>
</div>

<div class="container active" id="loginSection">
  <h2>Login</h2>
  <input type="text" id="loginUsername" placeholder="Username">
  <input type="password" id="loginPassword" placeholder="Password">
  <button onclick="signIn()">Sign In</button>
  <p>Don't have an account?
    <button class="link-button" onclick="showSection('registerSection')">Create one</button>
  </p>
  <p id="loginMessage" style="color: crimson;"></p>
</div>

<div class="container" id="registerSection">
  <h2>Create Account</h2>
  <input type="text" id="registerUsername" placeholder="Username">
  <input type="password" id="registerPassword" placeholder="Password">
  <button onclick="createAccount()">Register</button>
  <p>Already have an account?
    <button class="link-button" onclick="showSection('loginSection')">Back to login</button>
  </p>
  <p id="registerMessage" style="color: crimson;"></p>
</div>
<div class="container" id="homeSection">
  <h2>Welcome, <span id="userDisplay"></span> 👋</h2>
  <div class="nav">
    <button onclick="showSection('announcements')">📢 Announcements</button>
    <button onclick="showSection('assignments')">📚 Assignments</button>
    <button onclick="showSection('uploads')">📂 Upload File</button>
    <button onclick="showSection('profile')">🧍 My Profile</button>
    <button onclick="showSection('admin')">🔐 Admin</button>
    <button onclick="logout()">🚪 Log Out</button>
  </div>
</div>

<div class="container" id="announcements">
  <h2>📢 Announcements</h2>
  <ul>
    <li>📅 Presentation of your Groupings for Org and Management will be on tuesday</li>
    <li>🎉 Complete the requirements before this week ends</li>
  </ul>
  <button onclick="showSection('homeSection')">⬅ Back</button>
</div>

<div class="container" id="assignments">
  <h2>📚 Assignments</h2>
  <ul>
    <li>📝 Grouping Presentation</li>
    <li>📐 Sent the PPT</li>
  </ul>
  <button onclick="showSection('homeSection')">⬅ Back</button>
</div>

<div class="container" id="uploads">
  <h2>📂 Upload PowerPoint</h2>
  <input type="file" accept=".ppt,.pptx">
  <p><em>(Still working on it)</em></p>
  <button onclick="showSection('homeSection')">⬅ Back</button>
</div>

<div class="container" id="profile">
  <h2>🧍 My Profile</h2>
  <div style="background:#f1f5fa;padding:15px;border-radius:10px">
    <p><strong>Username:</strong> <span id="profileUsername"></span></p>
    <p><strong>Registered:</strong> <span id="profileRegistered"></span></p>
  </div>
  <button onclick="showSection('homeSection')">⬅ Back</button>
</div>

<div class="container" id="admin">
  <h2>🔐 All Registered Users</h2>
  <div id="adminList"></div>
  <button onclick="showSection('homeSection')">⬅ Back</button>
</div>

<script>
  let users = JSON.parse(localStorage.getItem("users")) || {};
  let lastUser = localStorage.getItem("lastUser") || "";

  if (lastUser) document.getElementById("loginUsername").value = lastUser;

  function showSection(id) {
    document.querySelectorAll(".container").forEach(c => c.classList.remove("active"));
    document.getElementById(id)?.classList.add("active");
    clearMessages();
    if (id === "registerSection") {
      document.getElementById("loginUsername").value = "";
      document.getElementById("loginPassword").value = "";
    }
    if (id === "profile") loadProfile();
    if (id === "admin") loadAdminList();
  }

  function signIn() {
    const u = document.getElementById("loginUsername").value.trim();
    const p = document.getElementById("loginPassword").value.trim();
    const msg = document.getElementById("loginMessage");

    if (users[u] && users[u].password === p) {
      document.getElementById("userDisplay").textContent = u;
      localStorage.setItem("lastUser", u);
      document.querySelectorAll(".container").forEach(div => div.classList.remove("active"));
      document.getElementById("splash").classList.add("show");
      setTimeout(() => {
        document.getElementById("splash").classList.remove("show");
        showSection("homeSection");
      }, 2000);
    } else {
      msg.textContent = "❌ Invalid username or password.";
    }
  }

  function createAccount() {
    const u = document.getElementById("registerUsername").value.trim();
    const p = document.getElementById("registerPassword").value.trim();
    const msg = document.getElementById("registerMessage");
    if (!u || !p) {
      msg.textContent = "Please fill out both fields.";
    } else if (users[u]) {
      msg.textContent = "Username already exists.";
    } else {
      users[u] = { password: p, registered: new Date().toLocaleString() };
      localStorage.setItem("users", JSON.stringify(users));
      localStorage.removeItem("lastUser");
      msg.style.color = "green";
      msg.textContent = "✅ Account created!";
      setTimeout(() => {
        document.getElementById("loginUsername").value = u;
        document.getElementById("loginPassword").value = "";
        showSection("loginSection");
      }, 1500);
    }
  }

  function logout() {
    document.getElementById("loginUsername").value = "";
    document.getElementById("loginPassword").value = "";
    showSection("loginSection");
  }

  function clearMessages() {
    document.getElementById("loginMessage").textContent = "";
    document.getElementById("registerMessage").textContent = "";
  }

  function loadProfile() {
    const u = localStorage.getItem("lastUser");
    if (u && users[u]) {
      document.getElementById("profileUsername").textContent = u;
      document.getElementById("profileRegistered").textContent = users[u].registered || "N/A";
    }
  }

  function loadAdminList() {
    const list = document.getElementById("adminList");
    list.innerHTML = "";
    for (let u in users) {
      list.innerHTML += `
        <div style="background:#f9f9f9;padding:10px 15px;margin-bottom:10px;border-radius:8px">
          <strong>${u}</strong><br>
          Password: ${users[u].password}<br>
          Registered: ${users[u].registered || "N/A"}
        </div>`;
    }
  }
</script>
</body>
</html>
